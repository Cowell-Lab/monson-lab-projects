MonsonLab TM-HC-RIS Notes

NOTE: We are now on V3 of analysis after reviews from submission. We added some samples
and reworked the groups to focus mostly on HC and RIS. I'm updating these notes with
new info as I go.

The data has come in multiple waves across multiple libraries. I've been pre-processing
and running IgBlast on VDJServer V1, then downloading the resultant AIRR TSV files for
additional analysis locally. These steps rarely need to be re-done once the base set of
parameters have been set.

Pre-processing:

IgBlast:

The downloaded AIRR TSV files are kept in separate library directories, and a series of
secondary analysis steps are performed in each library directory. Finally, all of the
resultant AIRR TSV files are copied into an analysis directory for tertiary analysis.

Using docker image: vdjserver/repertoire-summarization:2.0-imm4.4

Secondary Analysis

- Assign repertoire_id. Because the raw files were processed on VDJServer V1, they lack the repertoire_id in the
  AIRR TSV, so we need to assign them. Then we can perform clonal analysis followed by
  mutational analysis.

  1. Create AIRR repertoire metadata, this links the repertoire to the AIRR TSV file(s)
  2. Generate AIRR repertoire group file (make_groups_v2.py)
  3. Run bulk_assign_repertoire_ids.py in each library directory.
  4. Run rename_makedb.sh to swap AIRR TSV files with repertoire_id.

- Clonal assignment. (NOTE: This should be done by VDJServer IgBlast now)

  1. bash /work/research/monson-lab-projects/TM-HC-RIS/assign_clones.sh

- Calculate gene usage, gene combo, and junction length statistics
  Fill out repcalc templates
  (NOTE: This should be done by VDJServer RepCalc, but we need repertoire groups and filters)

- Calculate observed mutations
  (NOTE: This should be done by VDJServer RepCalc, but we need repertoire groups and filters)

  1. bash /work/research/monson-lab-projects/TM-HC-RIS/calc_mutations.sh


Tertiary Analysis

- stats
- mutations
- gt3shm
- 0shm

group RIS_PB_DNA has 31 repertoires.
group HC_PB_DNA has 20 repertoires.
group CIS_PB_DNA has 16 repertoires.
group ADVANCING has 29 repertoires.
group STABLE has 15 repertoires.
group CORD_POS has 31 repertoires.
group CORD_NEG has 16 repertoires.
group RIS_ADVANCING has 13 repertoires.
group RIS_STABLE has 15 repertoires.
group RIS_POS has 18 repertoires.
group RIS_NEG has 13 repertoires.
group RIS_CSRHI has 22 repertoires.
group RIS_CSRLO has 9 repertoires.
group CIS_ADVANCING has 16 repertoires.
group CIS_STABLE has 0 repertoires.
group CIS_POS has 13 repertoires.
group CIS_NEG has 3 repertoires.

Generate SHM ratios
-------------------------------------

stats:
python3 /work/research/monson-lab-projects/TM-HC-RIS/shm_ratio.py ../../repertoires.v2.airr.json ../../repertoire_groups.airr.json

ls *shm_ratios.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig2_


Generate VH family usage spreadsheets
-------------------------------------

From the main repcalc output, I run two scripts to extract result rows for each group, then add custom
sample columns.

stats:
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call subgroup proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json HC_PB_DNA HC_PB_DNA.VHfamily.all
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call subgroup proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json CIS_PB_DNA CIS_PB_DNA.VHfamily.all
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call subgroup proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json RIS_PB_DNA RIS_PB_DNA.VHfamily.all
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call subgroup proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json ADVANCING ADVANCING.VHfamily.all
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call subgroup proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json STABLE STABLE.VHfamily.all
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call subgroup proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json CORD_POS CORD_POS.VHfamily.all
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call subgroup proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json CORD_NEG CORD_NEG.VHfamily.all
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call subgroup proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json RIS_ADVANCING RIS_ADVANCING.VHfamily.all
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call subgroup proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json RIS_STABLE RIS_STABLE.VHfamily.all
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call subgroup proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json RIS_POS RIS_POS.VHfamily.all
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call subgroup proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json RIS_NEG RIS_NEG.VHfamily.all
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call subgroup proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json RIS_CSRHI RIS_CSRHI.VHfamily.all
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call subgroup proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json RIS_CSRLO RIS_CSRLO.VHfamily.all
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call subgroup proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json CIS_ADVANCING CIS_ADVANCING.VHfamily.all
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call subgroup proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json CIS_POS CIS_POS.VHfamily.all
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call subgroup proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json CIS_NEG CIS_NEG.VHfamily.all
#v1#python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call subgroup proportion ../../repertoires.v2.airr.json --group ../../repertoire_groups.airr.json TM_PB_DNA TM_PB_DNA.VHfamily.all

ls *family*usage_table.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig3_

gt3shm:
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call subgroup proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json HC_PB_DNA HC_PB_DNA.VHfamily.gt3shm
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call subgroup proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json CIS_PB_DNA CIS_PB_DNA.VHfamily.gt3shm
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call subgroup proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json RIS_PB_DNA RIS_PB_DNA.VHfamily.gt3shm
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call subgroup proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json ADVANCING ADVANCING.VHfamily.gt3shm
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call subgroup proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json STABLE STABLE.VHfamily.gt3shm
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call subgroup proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json CORD_POS CORD_POS.VHfamily.gt3shm
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call subgroup proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json CORD_NEG CORD_NEG.VHfamily.gt3shm
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call subgroup proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json RIS_ADVANCING RIS_ADVANCING.VHfamily.gt3shm
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call subgroup proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json RIS_STABLE RIS_STABLE.VHfamily.gt3shm
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call subgroup proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json RIS_POS RIS_POS.VHfamily.gt3shm
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call subgroup proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json RIS_NEG RIS_NEG.VHfamily.gt3shm
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call subgroup proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json RIS_CSRHI RIS_CSRHI.VHfamily.gt3shm
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call subgroup proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json RIS_CSRLO RIS_CSRLO.VHfamily.gt3shm
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call subgroup proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json CIS_ADVANCING CIS_ADVANCING.VHfamily.gt3shm
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call subgroup proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json CIS_POS CIS_POS.VHfamily.gt3shm
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call subgroup proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json CIS_NEG CIS_NEG.VHfamily.gt3shm
#v1#python3 /work/vdjserver/vdjserver-tapis/scripts/common/make_usage_table.py v_call subgroup proportion ../../repertoires.v2.airr.json --group ../../repertoire_groups.airr.json TM_PB_DNA TM_PB_DNA.VHfamily.gt3shm

ls *family*usage_table.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig3_

Generate VH gene usage spreadsheets
-------------------------------------

Similar to family usage, just a different level and different file names

stats:
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call gene proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json HC_PB_DNA HC_PB_DNA.VHgene.all
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call gene proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json CIS_PB_DNA CIS_PB_DNA.VHgene.all
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call gene proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json RIS_PB_DNA RIS_PB_DNA.VHgene.all
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call gene proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json ADVANCING ADVANCING.VHgene.all
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call gene proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json STABLE STABLE.VHgene.all
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call gene proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json CORD_POS CORD_POS.VHgene.all
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call gene proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json CORD_NEG CORD_NEG.VHgene.all
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call gene proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json RIS_ADVANCING RIS_ADVANCING.VHgene.all
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call gene proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json RIS_STABLE RIS_STABLE.VHgene.all
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call gene proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json RIS_POS RIS_POS.VHgene.all
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call gene proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json RIS_NEG RIS_NEG.VHgene.all
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call gene proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json RIS_CSRHI RIS_CSRHI.VHgene.all
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call gene proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json RIS_CSRLO RIS_CSRLO.VHgene.all
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call gene proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json CIS_ADVANCING CIS_ADVANCING.VHgene.all
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call gene proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json CIS_POS CIS_POS.VHgene.all
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call gene proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json CIS_NEG CIS_NEG.VHgene.all
#v1#python3 /work/vdjserver/irplus/tapis/vdjserver/common/make_usage_table.py v_call gene proportion ../../repertoires.v2.airr.json --group ../../repertoire_groups.airr.json TM_PB_DNA TM_PB_DNA.VHgene.all

ls *VHgene*usage_table.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig4_

gt3shm:
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call gene proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json HC_PB_DNA HC_PB_DNA.VHgene.gt3shm
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call gene proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json CIS_PB_DNA CIS_PB_DNA.VHgene.gt3shm
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call gene proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json RIS_PB_DNA RIS_PB_DNA.VHgene.gt3shm
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call gene proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json ADVANCING ADVANCING.VHgene.gt3shm
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call gene proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json STABLE STABLE.VHgene.gt3shm
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call gene proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json CORD_POS CORD_POS.VHgene.gt3shm
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call gene proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json CORD_NEG CORD_NEG.VHgene.gt3shm
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call gene proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json RIS_ADVANCING RIS_ADVANCING.VHgene.gt3shm
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call gene proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json RIS_STABLE RIS_STABLE.VHgene.gt3shm
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call gene proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json RIS_POS RIS_POS.VHgene.gt3shm
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call gene proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json RIS_NEG RIS_NEG.VHgene.gt3shm
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call gene proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json RIS_CSRHI RIS_CSRHI.VHgene.gt3shm
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call gene proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json RIS_CSRLO RIS_CSRLO.VHgene.gt3shm
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call gene proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json CIS_ADVANCING CIS_ADVANCING.VHgene.gt3shm
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call gene proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json CIS_POS CIS_POS.VHgene.gt3shm
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call gene proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json CIS_NEG CIS_NEG.VHgene.gt3shm
#v1#python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py v_call gene proportion ../../repertoires.v2.airr.json --group ../../repertoire_groups.airr.json TM_PB_DNA TM_PB_DNA.VHgene.gt3shm

ls *VHgene*usage_table.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig4_

Generate JH gene usage spreadsheets
-------------------------------------

stats:
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py j_call gene proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json HC_PB_DNA HC_PB_DNA.JHgene.all
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py j_call gene proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json CIS_PB_DNA CIS_PB_DNA.JHgene.all
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py j_call gene proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json RIS_PB_DNA RIS_PB_DNA.JHgene.all
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py j_call gene proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json ADVANCING ADVANCING.JHgene.all
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py j_call gene proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json STABLE STABLE.JHgene.all
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py j_call gene proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json CORD_POS CORD_POS.JHgene.all
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py j_call gene proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json CORD_NEG CORD_NEG.JHgene.all
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py j_call gene proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json RIS_ADVANCING RIS_ADVANCING.JHgene.all
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py j_call gene proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json RIS_STABLE RIS_STABLE.JHgene.all
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py j_call gene proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json RIS_POS RIS_POS.JHgene.all
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py j_call gene proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json RIS_NEG RIS_NEG.JHgene.all
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py j_call gene proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json RIS_CSRHI RIS_CSRHI.JHgene.all
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py j_call gene proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json RIS_CSRLO RIS_CSRLO.JHgene.all
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py j_call gene proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json CIS_ADVANCING CIS_ADVANCING.JHgene.all
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py j_call gene proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json CIS_POS CIS_POS.JHgene.all
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py j_call gene proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json CIS_NEG CIS_NEG.JHgene.all
#v1#python3 /work/vdjserver/irplus/tapis/vdjserver/common/make_usage_table.py j_call gene proportion ../../repertoires.v2.airr.json --group ../../repertoire_groups.airr.json TM_PB_DNA TM_PB_DNA.JHgene.all

ls *JHgene*usage_table.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig5_

gt3shm:
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py j_call gene proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json HC_PB_DNA HC_PB_DNA.JHgene.gt3shm
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py j_call gene proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json CIS_PB_DNA CIS_PB_DNA.JHgene.gt3shm
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py j_call gene proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json RIS_PB_DNA RIS_PB_DNA.JHgene.gt3shm
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py j_call gene proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json ADVANCING ADVANCING.JHgene.gt3shm
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py j_call gene proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json STABLE STABLE.JHgene.gt3shm
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py j_call gene proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json CORD_POS CORD_POS.JHgene.gt3shm
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py j_call gene proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json CORD_NEG CORD_NEG.JHgene.gt3shm
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py j_call gene proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json RIS_ADVANCING RIS_ADVANCING.JHgene.gt3shm
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py j_call gene proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json RIS_STABLE RIS_STABLE.JHgene.gt3shm
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py j_call gene proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json RIS_POS RIS_POS.JHgene.gt3shm
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py j_call gene proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json RIS_NEG RIS_NEG.JHgene.gt3shm
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py j_call gene proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json RIS_CSRHI RIS_CSRHI.JHgene.gt3shm
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py j_call gene proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json RIS_CSRLO RIS_CSRLO.JHgene.gt3shm
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py j_call gene proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json CIS_ADVANCING CIS_ADVANCING.JHgene.gt3shm
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py j_call gene proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json CIS_POS CIS_POS.JHgene.gt3shm
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py j_call gene proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json CIS_NEG CIS_NEG.JHgene.gt3shm
#v1#python3 /work/vdjserver/irplus/tapis/vdjserver/common/make_usage_table.py j_call gene proportion ../../repertoires.v2.airr.json --group ../../repertoire_groups.airr.json TM_PB_DNA TM_PB_DNA.JHgene.gt3shm

ls *JHgene*usage_table.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig5_

Generate VH/JH gene combo usage spreadsheets
--------------------------------------------

stats:
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py vj_combo subgroup proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json HC_PB_DNA HC_PB_DNA.VJcombo.all
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py vj_combo subgroup proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json CIS_PB_DNA CIS_PB_DNA.VJcombo.all
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py vj_combo subgroup proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json RIS_PB_DNA RIS_PB_DNA.VJcombo.all
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py vj_combo subgroup proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json ADVANCING ADVANCING.VJcombo.all
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py vj_combo subgroup proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json STABLE STABLE.VJcombo.all
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py vj_combo subgroup proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json CORD_POS CORD_POS.VJcombo.all
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py vj_combo subgroup proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json CORD_NEG CORD_NEG.VJcombo.all
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py vj_combo subgroup proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json RIS_ADVANCING RIS_ADVANCING.VJcombo.all
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py vj_combo subgroup proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json RIS_STABLE RIS_STABLE.VJcombo.all
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py vj_combo subgroup proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json RIS_POS RIS_POS.VJcombo.all
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py vj_combo subgroup proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json RIS_NEG RIS_NEG.VJcombo.all
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py vj_combo subgroup proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json RIS_CSRHI RIS_CSRHI.VJcombo.all
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py vj_combo subgroup proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json RIS_CSRLO RIS_CSRLO.VJcombo.all
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py vj_combo subgroup proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json CIS_ADVANCING CIS_ADVANCING.VJcombo.all
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py vj_combo subgroup proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json CIS_POS CIS_POS.VJcombo.all
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py vj_combo subgroup proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json CIS_NEG CIS_NEG.VJcombo.all
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py vj_combo subgroup proportion ../../repertoires.v2.airr.json --stage gene.mutations --group ../../repertoire_groups.airr.json MS2025_PB_DNA MS2025_PB_DNA.VJcombo.all
#v1#python3 /work/vdjserver/irplus/tapis/vdjserver/common/make_usage_table.py vj_combo subgroup proportion ../../repertoires.v2.airr.json --group ../../repertoire_groups.airr.json TM_PB_DNA TM_PB_DNA.VJcombo.all

ls *VJcombo*combo_table.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig6_

gt3shm:
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py vj_combo subgroup proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json HC_PB_DNA HC_PB_DNA.VJcombo.gt3shm
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py vj_combo subgroup proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json CIS_PB_DNA CIS_PB_DNA.VJcombo.gt3shm
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py vj_combo subgroup proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json RIS_PB_DNA RIS_PB_DNA.VJcombo.gt3shm
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py vj_combo subgroup proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json ADVANCING ADVANCING.VJcombo.gt3shm
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py vj_combo subgroup proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json STABLE STABLE.VJcombo.gt3shm
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py vj_combo subgroup proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json CORD_POS CORD_POS.VJcombo.gt3shm
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py vj_combo subgroup proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json CORD_NEG CORD_NEG.VJcombo.gt3shm
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py vj_combo subgroup proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json RIS_ADVANCING RIS_ADVANCING.VJcombo.gt3shm
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py vj_combo subgroup proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json RIS_STABLE RIS_STABLE.VJcombo.gt3shm
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py vj_combo subgroup proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json RIS_POS RIS_POS.VJcombo.gt3shm
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py vj_combo subgroup proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json RIS_NEG RIS_NEG.VJcombo.gt3shm
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py vj_combo subgroup proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json RIS_CSRHI RIS_CSRHI.VJcombo.gt3shm
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py vj_combo subgroup proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json RIS_CSRLO RIS_CSRLO.VJcombo.gt3shm
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py vj_combo subgroup proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json CIS_ADVANCING CIS_ADVANCING.VJcombo.gt3shm
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py vj_combo subgroup proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json CIS_POS CIS_POS.VJcombo.gt3shm
python3 /work/vdjserver/vdjserver-tapis/scripts/make_usage_table.py vj_combo subgroup proportion ../../repertoires.v2.airr.json --stage gt3shm.mutations --group ../../repertoire_groups.airr.json CIS_NEG CIS_NEG.VJcombo.gt3shm
#v1#python3 /work/vdjserver/irplus/tapis/vdjserver/common/make_usage_table.py vj_combo subgroup proportion ../../repertoires.v2.airr.json --group ../../repertoire_groups.airr.json TM_PB_DNA TM_PB_DNA.VJcombo.gt3shm

ls *VJcombo*combo_table.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig6_

Generate CDR3 junction length spreadsheets
------------------------------------------

Generated as part of do_statistics2.sh, so just attach metadata to appropriate files

stats:
gt3shm
ls HC_PB_DNA*repertoire*productive*junction_aa_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig7_
ls CIS_PB_DNA*repertoire*productive*junction_aa_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig7_
ls RIS_PB_DNA*repertoire*productive*junction_aa_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig7_
ls ADVANCING*repertoire*productive*junction_aa_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig7_
ls STABLE*repertoire*productive*junction_aa_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig7_
ls CORD_POS*repertoire*productive*junction_aa_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig7_
ls CORD_NEG*repertoire*productive*junction_aa_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig7_
ls RIS_ADVANCING*repertoire*productive*junction_aa_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig7_
ls RIS_STABLE*repertoire*productive*junction_aa_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig7_
ls RIS_POS*repertoire*productive*junction_aa_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig7_
ls RIS_NEG*repertoire*productive*junction_aa_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig7_
ls RIS_CSRHI*repertoire*productive*junction_aa_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig7_
ls RIS_CSRLO*repertoire*productive*junction_aa_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig7_
ls CIS_ADVANCING*repertoire*productive*junction_aa_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig7_
ls CIS_POS*repertoire*productive*junction_aa_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig7_
ls CIS_NEG*repertoire*productive*junction_aa_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig7_
#v1#ls TM_PB_DNA*repertoire*productive*junction_aa_length.csv | xargs -I % -n 1 python3 /work/research/immune/code/MonsonLab/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig7_

ls HC_PB_DNA*repertoire*productive*aa_wo_duplicates_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig7_
ls CIS_PB_DNA*repertoire*productive*aa_wo_duplicates_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig7_
ls RIS_PB_DNA*repertoire*productive*aa_wo_duplicates_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig7_
ls ADVANCING*repertoire*productive*aa_wo_duplicates_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig7_
ls STABLE*repertoire*productive*aa_wo_duplicates_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig7_
ls CORD_POS*repertoire*productive*aa_wo_duplicates_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig7_
ls CORD_NEG*repertoire*productive*aa_wo_duplicates_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig7_
ls RIS_ADVANCING*repertoire*productive*aa_wo_duplicates_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig7_
ls RIS_STABLE*repertoire*productive*aa_wo_duplicates_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig7_
ls RIS_POS*repertoire*productive*aa_wo_duplicates_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig7_
ls RIS_NEG*repertoire*productive*aa_wo_duplicates_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig7_
ls RIS_CSRHI*repertoire*productive*aa_wo_duplicates_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig7_
ls RIS_CSRLO*repertoire*productive*aa_wo_duplicates_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig7_
ls CIS_ADVANCING*repertoire*productive*aa_wo_duplicates_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig7_
ls CIS_POS*repertoire*productive*aa_wo_duplicates_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig7_
ls CIS_NEG*repertoire*productive*aa_wo_duplicates_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig7_
#v1#ls TM_PB_DNA*repertoire*productive*aa_wo_duplicates_length.csv | xargs -I % -n 1 python3 /work/research/immune/code/MonsonLab/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig7_

Split out by IGHJ with ighj1_files.py and etc into separate directories.
Run repcalc junction_length_config.json to calculate junction length.
Commands are the same as above but with different path to repertoire AIRR JSON.

ls HC_PB_DNA*repertoire*productive*junction_aa_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../repertoires.v2.airr.json % Fig7_
ls CIS_PB_DNA*repertoire*productive*junction_aa_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../repertoires.v2.airr.json % Fig7_
ls RIS_PB_DNA*repertoire*productive*junction_aa_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../repertoires.v2.airr.json % Fig7_
ls ADVANCING*repertoire*productive*junction_aa_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../repertoires.v2.airr.json % Fig7_
ls STABLE*repertoire*productive*junction_aa_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../repertoires.v2.airr.json % Fig7_
ls CORD_POS*repertoire*productive*junction_aa_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../repertoires.v2.airr.json % Fig7_
ls CORD_NEG*repertoire*productive*junction_aa_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../repertoires.v2.airr.json % Fig7_
ls RIS_ADVANCING*repertoire*productive*junction_aa_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../repertoires.v2.airr.json % Fig7_
ls RIS_STABLE*repertoire*productive*junction_aa_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../repertoires.v2.airr.json % Fig7_
ls RIS_POS*repertoire*productive*junction_aa_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../repertoires.v2.airr.json % Fig7_
ls RIS_NEG*repertoire*productive*junction_aa_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../repertoires.v2.airr.json % Fig7_
ls RIS_CSRHI*repertoire*productive*junction_aa_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../repertoires.v2.airr.json % Fig7_
ls RIS_CSRLO*repertoire*productive*junction_aa_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../repertoires.v2.airr.json % Fig7_
ls CIS_ADVANCING*repertoire*productive*junction_aa_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../repertoires.v2.airr.json % Fig7_
ls CIS_POS*repertoire*productive*junction_aa_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../repertoires.v2.airr.json % Fig7_
ls CIS_NEG*repertoire*productive*junction_aa_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../repertoires.v2.airr.json % Fig7_
#v1#ls TM_PB_DNA*repertoire*productive*junction_aa_length.csv | xargs -I % -n 1 python3 /work/research/immune/code/MonsonLab/TM-HC-RIS/attach_airr_metadata.py ../../../repertoires.v2.airr.json % Fig7_

ls HC_PB_DNA*repertoire*productive*aa_wo_duplicates_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../repertoires.v2.airr.json % Fig7_
ls CIS_PB_DNA*repertoire*productive*aa_wo_duplicates_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../repertoires.v2.airr.json % Fig7_
ls RIS_PB_DNA*repertoire*productive*aa_wo_duplicates_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../repertoires.v2.airr.json % Fig7_
ls ADVANCING*repertoire*productive*aa_wo_duplicates_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../repertoires.v2.airr.json % Fig7_
ls STABLE*repertoire*productive*aa_wo_duplicates_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../repertoires.v2.airr.json % Fig7_
ls CORD_POS*repertoire*productive*aa_wo_duplicates_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../repertoires.v2.airr.json % Fig7_
ls CORD_NEG*repertoire*productive*aa_wo_duplicates_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../repertoires.v2.airr.json % Fig7_
ls RIS_ADVANCING*repertoire*productive*aa_wo_duplicates_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../repertoires.v2.airr.json % Fig7_
ls RIS_STABLE*repertoire*productive*aa_wo_duplicates_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../repertoires.v2.airr.json % Fig7_
ls RIS_POS*repertoire*productive*aa_wo_duplicates_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../repertoires.v2.airr.json % Fig7_
ls RIS_NEG*repertoire*productive*aa_wo_duplicates_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../repertoires.v2.airr.json % Fig7_
ls RIS_CSRHI*repertoire*productive*aa_wo_duplicates_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../repertoires.v2.airr.json % Fig7_
ls RIS_CSRLO*repertoire*productive*aa_wo_duplicates_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../repertoires.v2.airr.json % Fig7_
ls CIS_ADVANCING*repertoire*productive*aa_wo_duplicates_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../repertoires.v2.airr.json % Fig7_
ls CIS_POS*repertoire*productive*aa_wo_duplicates_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../repertoires.v2.airr.json % Fig7_
ls CIS_NEG*repertoire*productive*aa_wo_duplicates_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../repertoires.v2.airr.json % Fig7_
#v1#ls TM_PB_DNA*repertoire*productive*aa_wo_duplicates_length.csv | xargs -I % -n 1 python3 /work/research/immune/code/MonsonLab/TM-HC-RIS/attach_airr_metadata.py ../../../repertoires.v2.airr.json % Fig7_

To get V/J combos, split out by IGHV for each IGHJ folder with ighv1_files.py and etc into separate directories.
We only did this split with IGHJ6.
Run repcalc junction_length_config.json to calculate junction length.
Commands are the same as above but with different path to repertoire AIRR JSON.

ls HC_PB_DNA*repertoire*productive*junction_aa_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../../repertoires.v2.airr.json % Fig7_
ls CIS_PB_DNA*repertoire*productive*junction_aa_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../../repertoires.v2.airr.json % Fig7_
ls RIS_PB_DNA*repertoire*productive*junction_aa_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../../repertoires.v2.airr.json % Fig7_
ls ADVANCING*repertoire*productive*junction_aa_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../../repertoires.v2.airr.json % Fig7_
ls STABLE*repertoire*productive*junction_aa_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../../repertoires.v2.airr.json % Fig7_
ls CORD_POS*repertoire*productive*junction_aa_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../../repertoires.v2.airr.json % Fig7_
ls CORD_NEG*repertoire*productive*junction_aa_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../../repertoires.v2.airr.json % Fig7_
ls RIS_ADVANCING*repertoire*productive*junction_aa_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../../repertoires.v2.airr.json % Fig7_
ls RIS_STABLE*repertoire*productive*junction_aa_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../../repertoires.v2.airr.json % Fig7_
ls RIS_POS*repertoire*productive*junction_aa_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../../repertoires.v2.airr.json % Fig7_
ls RIS_NEG*repertoire*productive*junction_aa_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../../repertoires.v2.airr.json % Fig7_
ls RIS_CSRHI*repertoire*productive*junction_aa_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../../repertoires.v2.airr.json % Fig7_
ls RIS_CSRLO*repertoire*productive*junction_aa_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../../repertoires.v2.airr.json % Fig7_
ls CIS_ADVANCING*repertoire*productive*junction_aa_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../../repertoires.v2.airr.json % Fig7_
ls CIS_POS*repertoire*productive*junction_aa_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../../repertoires.v2.airr.json % Fig7_
ls CIS_NEG*repertoire*productive*junction_aa_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../../repertoires.v2.airr.json % Fig7_
#v1#ls TM_PB_DNA*repertoire*productive*junction_aa_length.csv | xargs -I % -n 1 python3 /work/research/immune/code/MonsonLab/TM-HC-RIS/attach_airr_metadata.py ../../../../repertoires.v2.airr.json % Fig7_

ls HC_PB_DNA*repertoire*productive*aa_wo_duplicates_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../../repertoires.v2.airr.json % Fig7_
ls CIS_PB_DNA*repertoire*productive*aa_wo_duplicates_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../../repertoires.v2.airr.json % Fig7_
ls RIS_PB_DNA*repertoire*productive*aa_wo_duplicates_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../../repertoires.v2.airr.json % Fig7_
ls ADVANCING*repertoire*productive*aa_wo_duplicates_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../../repertoires.v2.airr.json % Fig7_
ls STABLE*repertoire*productive*aa_wo_duplicates_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../../repertoires.v2.airr.json % Fig7_
ls CORD_POS*repertoire*productive*aa_wo_duplicates_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../../repertoires.v2.airr.json % Fig7_
ls CORD_NEG*repertoire*productive*aa_wo_duplicates_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../../repertoires.v2.airr.json % Fig7_
ls RIS_ADVANCING*repertoire*productive*aa_wo_duplicates_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../../repertoires.v2.airr.json % Fig7_
ls RIS_STABLE*repertoire*productive*aa_wo_duplicates_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../../repertoires.v2.airr.json % Fig7_
ls RIS_POS*repertoire*productive*aa_wo_duplicates_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../../repertoires.v2.airr.json % Fig7_
ls RIS_NEG*repertoire*productive*aa_wo_duplicates_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../../repertoires.v2.airr.json % Fig7_
ls RIS_CSRHI*repertoire*productive*aa_wo_duplicates_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../../repertoires.v2.airr.json % Fig7_
ls RIS_CSRLO*repertoire*productive*aa_wo_duplicates_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../../repertoires.v2.airr.json % Fig7_
ls CIS_ADVANCING*repertoire*productive*aa_wo_duplicates_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../../repertoires.v2.airr.json % Fig7_
ls CIS_POS*repertoire*productive*aa_wo_duplicates_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../../repertoires.v2.airr.json % Fig7_
ls CIS_NEG*repertoire*productive*aa_wo_duplicates_length.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../../repertoires.v2.airr.json % Fig7_
#v1#ls TM_PB_DNA*repertoire*productive*aa_wo_duplicates_length.csv | xargs -I % -n 1 python3 /work/research/immune/code/MonsonLab/TM-HC-RIS/attach_airr_metadata.py ../../../../repertoires.v2.airr.json % Fig7_

Generate CDR3 charge spreadsheets
------------------------------------------

Run ighvX_files.py to filter for specific VH family with the files in a separate directory.
Manually run summary_aa_properties.R for each directory to generate summary CSV.

ls *summary*aa_properties.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig7_

Split out by IGHJ with ighj1_files.py and etc into separate directories. Modify and run R script

Rscript /work/research/monson-lab-projects/TM-HC-RIS/summary_aa_properties.R

ls *summary*aa_properties.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../repertoires.v2.airr.json % Fig7_

To get V/J combos, split out by IGHV for each IGHJ folder with ighv1_files.py and etc into separate directories. This might have already been done above for junction length.

Modify and run R script

Rscript /work/research/monson-lab-projects/TM-HC-RIS/summary_aa_properties.R

ls *summary*aa_properties.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../../../repertoires.v2.airr.json % Fig7_

Generate mutation frequency spreadsheets
----------------------------------------

To split out IGHV3 and IGHV4, I run filters to pull out just those sequences.

cd ighv3_mutations
python3 /work/research/immune/code/MonsonLab/TM-HC-RIS/ighv3_files.py
cd ighv4_mutations
python3 /work/research/immune/code/MonsonLab/TM-HC-RIS/ighv4_files.py

then run repcalc mutations_config.json

ls HC_PB_DNA*mutational_report.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig8_
ls CIS_PB_DNA*mutational_report.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig8_
ls RIS_PB_DNA*mutational_report.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig8_
ls MS2025_PB_DNA*mutational_report.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig8_
ls ADVANCING*mutational_report.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig8_
ls STABLE*mutational_report.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig8_
ls CORD_POS*mutational_report.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig8_
ls CORD_NEG*mutational_report.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig8_
ls RIS_ADVANCING*mutational_report.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig8_
ls RIS_STABLE*mutational_report.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig8_
ls RIS_POS*mutational_report.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig8_
ls RIS_NEG*mutational_report.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig8_
ls RIS_CSRHI*mutational_report.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig8_
ls RIS_CSRLO*mutational_report.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig8_
ls CIS_ADVANCING*mutational_report.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig8_
ls CIS_POS*mutational_report.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig8_
ls CIS_NEG*mutational_report.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig8_
#v1#ls TM_PB_DNA*mutational_report.csv | xargs -I % -n 1 python3 /work/research/monson-lab-projects/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig8_

For IGHJ split under IGHV4

ls HC_PB_DNA*mutational_report.csv | xargs -I % -n 1 python3 /work/research/immune/code/MonsonLab/TM-HC-RIS/attach_airr_metadata.py ../../../repertoires.v2.airr.json % Fig8_
ls RIS_PB_DNA*mutational_report.csv | xargs -I % -n 1 python3 /work/research/immune/code/MonsonLab/TM-HC-RIS/attach_airr_metadata.py ../../../repertoires.v2.airr.json % Fig8_
ls TM_PB_DNA*mutational_report.csv | xargs -I % -n 1 python3 /work/research/immune/code/MonsonLab/TM-HC-RIS/attach_airr_metadata.py ../../../repertoires.v2.airr.json % Fig8_

Generate mutation hedgehog plots
----------------------------------------

Modify cluster_mutations.R and run for each group to generate png file.


Top 1/5 clones for bubbleplot
-------------------------------------

stats:
python3 /work/research/immune/code/MonsonLab/TM-HC-RIS/extract_clones.py ../../repertoires.v2.airr.json ../../repertoire_groups.airr.json gene.mutations 1
python3 /work/research/immune/code/MonsonLab/TM-HC-RIS/extract_clones.py ../../repertoires.v2.airr.json ../../repertoire_groups.airr.json gene.mutations 5

ls HC_PB_DNA*top*.csv | xargs -I % -n 1 python3 /work/research/immune/code/MonsonLab/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig7_
ls RIS_PB_DNA*top*.csv | xargs -I % -n 1 python3 /work/research/immune/code/MonsonLab/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig7_
ls TM_PB_DNA*top*.csv | xargs -I % -n 1 python3 /work/research/immune/code/MonsonLab/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig7_

gt3shm:
python3 /work/research/immune/code/MonsonLab/TM-HC-RIS/extract_clones.py ../../repertoires.v2.airr.json ../../repertoire_groups.airr.json gt3shm.mutations 1
python3 /work/research/immune/code/MonsonLab/TM-HC-RIS/extract_clones.py ../../repertoires.v2.airr.json ../../repertoire_groups.airr.json gt3shm.mutations 5

ls HC_PB_DNA*top*.csv | xargs -I % -n 1 python3 /work/research/immune/code/MonsonLab/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig7_
ls RIS_PB_DNA*top*.csv | xargs -I % -n 1 python3 /work/research/immune/code/MonsonLab/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig7_
ls TM_PB_DNA*top*.csv | xargs -I % -n 1 python3 /work/research/immune/code/MonsonLab/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig7_

Search CDR3 against rhAbs databases
-------------------------------------
Might need to install levenshtein package:

pip3 install levenshtein

mutations:
python3 /work/research/immune/code/MonsonLab/TM-HC-RIS/search_cdr3.py ../../repertoires.v2.airr.json ../../repertoire_groups.airr.json gene.mutations ../../../rhAbs/fad50c30-9c35-4b29-bdb7-bd26eb2bcd79-007/NeuronPOS.igblast.airr.tsv HC_PB_DNA AJL10
python3 /work/research/immune/code/MonsonLab/TM-HC-RIS/search_cdr3.py ../../repertoires.v2.airr.json ../../repertoire_groups.airr.json gene.mutations ../../../rhAbs/fad50c30-9c35-4b29-bdb7-bd26eb2bcd79-007/NeuronPOS.igblast.airr.tsv RIS_PB_DNA AJL10
python3 /work/research/immune/code/MonsonLab/TM-HC-RIS/search_cdr3.py ../../repertoires.v2.airr.json ../../repertoire_groups.airr.json gene.mutations ../../../rhAbs/fad50c30-9c35-4b29-bdb7-bd26eb2bcd79-007/NeuronPOS.igblast.airr.tsv TM_PB_DNA AJL10

python3 /work/research/immune/code/MonsonLab/TM-HC-RIS/search_cdr3.py ../../repertoires.v2.airr.json ../../repertoire_groups.airr.json gene.mutations ../../../rhAbs/fad50c30-9c35-4b29-bdb7-bd26eb2bcd79-007/rhAb_VH_SEQ_NeuronPOS.igblast.airr.tsv HC_PB_DNA rhAb_VH_SEQ_NeuronPOS
python3 /work/research/immune/code/MonsonLab/TM-HC-RIS/search_cdr3.py ../../repertoires.v2.airr.json ../../repertoire_groups.airr.json gene.mutations ../../../rhAbs/fad50c30-9c35-4b29-bdb7-bd26eb2bcd79-007/rhAb_VH_SEQ_NeuronPOS.igblast.airr.tsv RIS_PB_DNA rhAb_VH_SEQ_NeuronPOS
python3 /work/research/immune/code/MonsonLab/TM-HC-RIS/search_cdr3.py ../../repertoires.v2.airr.json ../../repertoire_groups.airr.json gene.mutations ../../../rhAbs/fad50c30-9c35-4b29-bdb7-bd26eb2bcd79-007/rhAb_VH_SEQ_NeuronPOS.igblast.airr.tsv TM_PB_DNA rhAb_VH_SEQ_NeuronPOS

python3 /work/research/immune/code/MonsonLab/TM-HC-RIS/search_cdr3.py ../../repertoires.v2.airr.json ../../repertoire_groups.airr.json gene.mutations ../../../rhAbs/fad50c30-9c35-4b29-bdb7-bd26eb2bcd79-007/rhAb_VH_SEQ_TMsubjects.igblast.airr.tsv HC_PB_DNA rhAb_VH_SEQ_TMsubjects
python3 /work/research/immune/code/MonsonLab/TM-HC-RIS/search_cdr3.py ../../repertoires.v2.airr.json ../../repertoire_groups.airr.json gene.mutations ../../../rhAbs/fad50c30-9c35-4b29-bdb7-bd26eb2bcd79-007/rhAb_VH_SEQ_TMsubjects.igblast.airr.tsv RIS_PB_DNA rhAb_VH_SEQ_TMsubjects
python3 /work/research/immune/code/MonsonLab/TM-HC-RIS/search_cdr3.py ../../repertoires.v2.airr.json ../../repertoire_groups.airr.json gene.mutations ../../../rhAbs/fad50c30-9c35-4b29-bdb7-bd26eb2bcd79-007/rhAb_VH_SEQ_TMsubjects.igblast.airr.tsv TM_PB_DNA rhAb_VH_SEQ_TMsubjects

ls *summary.csv | xargs -I % -n 1 python3 /work/research/immune/code/MonsonLab/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig10_

gt3shm:
python3 /work/research/immune/code/MonsonLab/TM-HC-RIS/search_cdr3.py ../../repertoires.v2.airr.json ../../repertoire_groups.airr.json gt3shm.mutations ../../../rhAbs/fad50c30-9c35-4b29-bdb7-bd26eb2bcd79-007/NeuronPOS.igblast.airr.tsv HC_PB_DNA AJL10
python3 /work/research/immune/code/MonsonLab/TM-HC-RIS/search_cdr3.py ../../repertoires.v2.airr.json ../../repertoire_groups.airr.json gt3shm.mutations ../../../rhAbs/fad50c30-9c35-4b29-bdb7-bd26eb2bcd79-007/NeuronPOS.igblast.airr.tsv RIS_PB_DNA AJL10
python3 /work/research/immune/code/MonsonLab/TM-HC-RIS/search_cdr3.py ../../repertoires.v2.airr.json ../../repertoire_groups.airr.json gt3shm.mutations ../../../rhAbs/fad50c30-9c35-4b29-bdb7-bd26eb2bcd79-007/NeuronPOS.igblast.airr.tsv TM_PB_DNA AJL10

python3 /work/research/immune/code/MonsonLab/TM-HC-RIS/search_cdr3.py ../../repertoires.v2.airr.json ../../repertoire_groups.airr.json gt3shm.mutations ../../../rhAbs/fad50c30-9c35-4b29-bdb7-bd26eb2bcd79-007/rhAb_VH_SEQ_NeuronPOS.igblast.airr.tsv HC_PB_DNA rhAb_VH_SEQ_NeuronPOS
python3 /work/research/immune/code/MonsonLab/TM-HC-RIS/search_cdr3.py ../../repertoires.v2.airr.json ../../repertoire_groups.airr.json gt3shm.mutations ../../../rhAbs/fad50c30-9c35-4b29-bdb7-bd26eb2bcd79-007/rhAb_VH_SEQ_NeuronPOS.igblast.airr.tsv RIS_PB_DNA rhAb_VH_SEQ_NeuronPOS
python3 /work/research/immune/code/MonsonLab/TM-HC-RIS/search_cdr3.py ../../repertoires.v2.airr.json ../../repertoire_groups.airr.json gt3shm.mutations ../../../rhAbs/fad50c30-9c35-4b29-bdb7-bd26eb2bcd79-007/rhAb_VH_SEQ_NeuronPOS.igblast.airr.tsv TM_PB_DNA rhAb_VH_SEQ_NeuronPOS

python3 /work/research/immune/code/MonsonLab/TM-HC-RIS/search_cdr3.py ../../repertoires.v2.airr.json ../../repertoire_groups.airr.json gt3shm.mutations ../../../rhAbs/fad50c30-9c35-4b29-bdb7-bd26eb2bcd79-007/rhAb_VH_SEQ_TMsubjects.igblast.airr.tsv HC_PB_DNA rhAb_VH_SEQ_TMsubjects
python3 /work/research/immune/code/MonsonLab/TM-HC-RIS/search_cdr3.py ../../repertoires.v2.airr.json ../../repertoire_groups.airr.json gt3shm.mutations ../../../rhAbs/fad50c30-9c35-4b29-bdb7-bd26eb2bcd79-007/rhAb_VH_SEQ_TMsubjects.igblast.airr.tsv RIS_PB_DNA rhAb_VH_SEQ_TMsubjects
python3 /work/research/immune/code/MonsonLab/TM-HC-RIS/search_cdr3.py ../../repertoires.v2.airr.json ../../repertoire_groups.airr.json gt3shm.mutations ../../../rhAbs/fad50c30-9c35-4b29-bdb7-bd26eb2bcd79-007/rhAb_VH_SEQ_TMsubjects.igblast.airr.tsv TM_PB_DNA rhAb_VH_SEQ_TMsubjects

ls *summary.csv | xargs -I % -n 1 python3 /work/research/immune/code/MonsonLab/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig10_

mutation frequency spreadsheets for AJL10 of rhAbs
-------------------------------------
Copy the *AJL10.airr.tsv files to separate directory. Copy and modify mutations_config.json to only include
those rearrangement files, then run repcalc mutations_config.json

AJL10_mutations:

ls HC_PB_DNA*mutational_report.csv | xargs -I % -n 1 python3 /work/research/immune/code/MonsonLab/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig10_
ls RIS_PB_DNA*mutational_report.csv | xargs -I % -n 1 python3 /work/research/immune/code/MonsonLab/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig10_
ls TM_PB_DNA*mutational_report.csv | xargs -I % -n 1 python3 /work/research/immune/code/MonsonLab/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig10_

AJL10_gt3shm:

ls HC_PB_DNA*mutational_report.csv | xargs -I % -n 1 python3 /work/research/immune/code/MonsonLab/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig10_
ls RIS_PB_DNA*mutational_report.csv | xargs -I % -n 1 python3 /work/research/immune/code/MonsonLab/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig10_
ls TM_PB_DNA*mutational_report.csv | xargs -I % -n 1 python3 /work/research/immune/code/MonsonLab/TM-HC-RIS/attach_airr_metadata.py ../../repertoires.v2.airr.json % Fig10_

-------------------------------------

